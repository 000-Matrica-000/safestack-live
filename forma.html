<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PasitikÄ—jimo forma - SafeStack</title>
  <link rel="stylesheet" href="../style.css"/>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>
  <h1>âœ… PasitikÄ—jimo Validacijos Forma</h1>
  <form id="trustForm">
    <label for="vardas">Vardas (neprivaloma):</label><br>
    <input type="text" id="vardas" name="vardas" style="width:100%"><br><br>

    <label for="klausimai">Klausimas arba pastaba dÄ—l pasitikÄ—jimo:</label><br>
    <textarea id="klausimai" name="klausimai" rows="6" style="width:100%"></textarea><br><br>

    <div class="g-recaptcha" data-sitekey="6Lcm25krAAAAAHvCFamz2o6SH-7yGXVIw16td_Wo"></div><br>
    <input type="submit" value="SiÅ³sti" style="padding: 0.5rem 1rem;">
  </form>

  <p id="confirmation" style="display:none; margin-top: 1rem; color:lightgreen;">âœ… Å½inutÄ— iÅ¡siÅ³sta Ä¯ SafeStack Telegram.</p>

  <footer>
    <p><small>Forma saugoma reCAPTCHA ir siunÄia Ä¯ <a href="https://t.me/Safe_Stack" target="_blank">@Safe_Stack</a> Telegram kanalÄ….</small></p>
  </footer>

  <script>
    const token = "";
    const chatId = "";

    document.getElementById("trustForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      const response = grecaptcha.getResponse();
      if (!response) {
        alert("â— PraÅ¡ome patvirtinti, kad nesate robotas.");
        return;
      }

      const vardas = document.getElementById("vardas").value || "NeÄ¯vestas";
      const zinute = document.getElementById("klausimai").value || "Be teksto";

      const message = `ğŸ§¾ Nauja pasitikÄ—jimo forma:%0AğŸ‘¤ Vardas: ${vardas}%0AğŸ’¬ Å½inutÄ—: ${zinute}`;
      const url = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;

      const resp = await fetch(url);
      if (resp.ok) {
        document.getElementById("confirmation").style.display = "block";
        document.getElementById("trustForm").reset();
        grecaptcha.reset();
      } else {
        alert("âŒ Klaida siunÄiant Å¾inutÄ™ Ä¯ Telegram.");
      }
    });
  </script>
</body>
</html>
